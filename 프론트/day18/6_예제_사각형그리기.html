<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>사각형 그리기 예제</title>
	<script src="../js/jquery.min.js"></script>
	<style>
		.box{border: 2px solid black; position: absolute;}
		body{margin: 0; padding: 0; height: 100vh;}
		
	</style>
</head>
<body>
	<!-- 
		마우스를 누르고 이동한 후 마우스를 뗐을 때 눌렀던 위치에서 시작하여 뗐을때 위치로 이루어진
		사각형을 그리도록 코드를 작성하세요.
	 -->
	
	
	
	<script>
		// var posLeft,posRight,posTop,posBottom;
		// $('body').mousedown(function(e){
		// 	posLeft=e.originalEvent.x;
		// 	posTop=e.originalEvent.y;
		// })
		// $('body').mouseup(function(e){
		// 	posRight=e.originalEvent.x;
		// 	posBottom=e.originalEvent.y;
		// })
		// $('body').click(function(){
		// 	if(posLeft>posRight){
		// 		var tmp;
		// 		tmp = posRight;
		// 		posRight = posLeft;
		// 		posLeft = tmp;
		// 	}
		// 	if(posTop>posBottom){
		// 		var tmp;
		// 		tmp = posTop;
		// 		posTop = posBottom;
		// 		posBottom = tmp;
		// 	}

		// 	$(this).append('<div class="box"></div>');
		// 	$(this).children().last().css({
		// 		left : posLeft,
		// 		top : posTop,
		// 		width : posRight-posLeft-4,
		// 		height : posBottom-posTop-4
		// 	})
		// })
		
		var drawing = false;
		var left, topy, width, height;
		$('body').mousedown(function(e){
			var x = e.originalEvent.x;
			var y = e.originalEvent.y;
			$(this).append('<div class="box"></div>');
			$(this).children().last().css({left:x,top:y,width:0,height:0})
			left = x;
			topy = y;
			drawing = true;
		})
		$('body').mouseup(function(e){
			var x = e.originalEvent.x;
			var y = e.originalEvent.y;
			drawing = false;
			// $(this).children().last().css({left:left, top:topy, width:width, height:height});
			drawRect($(this).children().last(), left, topy, x, y);
		});
		$('body').mousemove(function(e){
			if(drawing){
				var x = e.originalEvent.x;
				var y = e.originalEvent.y;
				
				// $(this).children().last().css({left:left, top:topy, width:width, height:height});
				drawRect($(this).children().last(), left, topy, x, y);
			}			
		});
		function drawRect($obj, x1, y1, x2, y2){
			var width = Math.abs(x2 - x1);
			var height = Math.abs(y2 - y1);
			var left = x1 < x2 ? x1 : x2;
			var top = y1 < y2 ? y1 : y2;
			$obj.css({left:left, top:top, width:width, height:height});
		}
	</script>
</body>
</html>